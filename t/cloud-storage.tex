%pdflatex-../thesis.tex
% vim:spell spelllang=en_us

% Storage

Storage is an essential part of datacenter since it provides space for saving information. We can distinguish between different types of storages and dozens of storage access methods so it is obvious that building one universal solution for all use cases is impossible. 

\subsection{Physical storage}
Storage solution can be divided into layers. First layer is physical storage and it is represented by physical hardware used to save data into. It can be physical rotary drive, \Ac{SSD}, tape drive or any other kind of physical storage. Every server can be equipped with smaller drive at is own physical storage and use it for services running on this node. This approach is called Direct Attached Storages and it is call share-nothing because in connection with data center storage architectures. The advantages of share-nothing is high level of node's independence, but I think that this solution is not flexible enough to be used as main storage scenario for whole data center.

Another way of providing servers with physical storage is using some sort of centralized storage. There is a central box with stuffed with physical storage and other server are using this storage via some standardized protocol like \Ac{FCP} or \Ac{iSCSI}. Shared storage brings better flexibility compared to direct attached storage, because physical storage is not fixed to a single server. 

It is possible pro build separate network dedicated to storage, called \Ac{SAN}, or use existing data network. Isolated \Ac{SAN} can provide better performance but it is obviously more expensive to build. However using convergent network for storage is not as straight solution as it may look because it is necessary to deploy advanced technologies like lossless Ethernet.

Physical storage can be organized into layers called tiers. Tiers are groups of physical storage devices usually organized by their performance, reliability or price. It would be obviously better to uses only high performance and reliable devices, however these are usually the most expensive one with low capacity/price coefficient. Tiered storage can provide high performance and high capacity together but it is necessary to use different tiers and optimize data placement. Storage with 3 tiers can use following drives:
\begin{itemize}
	\item tier 1 - \Ac{FC} drives
	\item tier 2 - \Ac{SATA} drives
	\item tier 3 - magnetic tapes
\end{itemize}
Exactly this 3 tier model is used by CESNET's data storages facilities in Pilsen. However tier model can be extended with more technologies such as flashcache\footnote{\url{http://github.com/facebook/flashcache}} capable of increasing drive \Ac{IOPS} by writethrough caching to another faster drive. Another extension layers may be introduced by using different \Ac{RAID} for every tier.


\subsection{Virtual storage}
To deliver storage for physical server is only the first problem, since it is required to split this raw storage and use for another storage layers. There are three fundamental virtual storage types: block storage, file system and object storage. It does not matter if this virtual storage is used directly by physical servers or by virtual servers via any virtualization layer since access method is actually the same.

% block 
Block storage is used way similar to directly attached. Block device is exposed to operating system and storage is accessed through block device. Storage operations are managed directly by the operating system and it is main characteristic of this storage type. Block device can be formated with filesystem, used as physical volume for \Ac{LVM} or used as encrypted storage.

% filesystem
Filesystem storage is used to save files and it's attributes. Filesystem can be build upon local block device or accessed as \Ac{NAS}. Filesystem on local block device can deliver lower latency and it is easier to match permissions with local user accounts, but these advantages count only for strictly local filesystem. I think that using \Ac{NAS} is almost required in case when any between user or computer sharing is required. Storage accessed via network will probably be easier to maintain and it is also easier to perform backups. 

% object storage
Object storage is something between previously mentioned storage types since it is capable to save objects and access them similar way as accessing files in filesystem. However object storage is more general way of saving data and can be used to store various objects and it is not limited only to files. It provides very high level of storage abstraction because it is capable to operate on almost any data, access it in standardized way and decouples object from their location.

It is even possible to build filesystem upon object storage and it is used for example in CephFS\footnote{\url{https://ceph.com/docs/master/cephfs/}}. This solution uses two pools of objects for \Uv{emulation} filesystem. Files are saved into ono pool as objects and related metadata are save in other pool. 

\subsection{Network access}



\begin{itemize}
	\item redundancy is required to provide failover and eliminate data corruption in case of failure 
	\item distribution help to spread load between nodes
	\item agility is necessary to be able to deliver storage for different services with different parameters
	\item scalability means that storage can be easily extended without any significant architecture changes
	\item security must be taken into account because it is critical to avoid any unauthorized access or leakage
\end{itemize}

% 



% file storage / block storage

% share-nothing X centralized

% share-nothing

% centralized storage
% NFS mount
% CEPH
