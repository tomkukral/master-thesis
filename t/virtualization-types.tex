%pdflatex-../thesis.tex
% vim:spell spelllang=en_us

There are three different virtualization types and they vary by method used to add virtualization layer between guests and physical hardware. It it not possible to easily choose better or worse virtualization types, because it depends on intended usage, character of computing tasks and required operating system.
 
Architectures of computers, especially x86, are designed to run on physical devices, thus is in not easy to virtualize them. Access to hardware is controlled by priority levels called rings. Lowest priority is used by userspace applications and highest priority (ring 0) is reserved for operating system. It is necessary to insert virtualization layer between operating system and hardware, but there is not any ring with higher priority than operating system uses. This problem needs to be solved and it is not only one challenge. There are sensitive instructions incompatible with virtualization, because they use different semantics when they are not run in ring 0, as mentioned in \cite{vmware-para}.

\subsubsection{Paravirtualization}
Paravirtualization is type of virtualization with necessity of modifications in guest kernel. Modifications of kernel are necessary, because operating system uses non-virtualizable instructions that are trying to gain direct access to the hardware. These instruction need to be replaced with hypercalls that communicate directly with virtualization layer of hypervisor. \cite{vmware-para} It is obvious, that guest operating system knows it is running virtualized. 

containers?

Biggest advantage of paravirtualization is lower overhead compared to other types, because it is not necessary to translate instructions before running. However this advantages becomes less significant during time since there are already available processors optimized to run hardware assisted virtualization with less overhead. Main drawback of this type of virtualization is need for modifications done at an operating system, which is not always possible or allowed. Running modified \Ac{OS} also brings additional administration and thus additional cost.

\subsubsection{Full virtualization}
Virtualization type capable or running unmodified operating system is called full virtualization. It utilizes runtime translation, which captures non-virtualizable commands and emulates them using hypervisor virtualization layer. Virtualizable instructions are executed directly on the hardware. Modification of \Uv{problematic} calls is carried by the hypervisor and it is the main difference compared with paravirtualization. 

Most important benefit of full virtualization is it's ability to run guest operating system without any changes, so guest \Ac{OS} is not aware of being virtualized. This makes guest operating system fully abstracted from underlaying hardware, it is possible to multiple different operating system on single host and provides simple migration from physical to virtual machine. Drawback of this type is overhead caused by catching and translating non-virtualized calls. 

\subsubsection{Hardware assisted virtualization}
Full virtualization has significant overhead caused by binary translation, so \Ac{CPU} vendors introduced technologies capable of inserting virtualization layer between ring 0 and physical hardware. It speeds-up trap of privileged and sensitive calls to the hypervisor and it is not necessary to perform binary translation of to modificate kernel of guest operating system. 

Benefit of this type is quite obvious, because it lowers virtualization overhead and thus provides better performance compared with full virtualization together with elimination of need for guest kernel modifications compared with paravirtualization. It is necessary to have a support in host's \Ac{CPU} is primary drawback of this type, but there is support in almost every processor in the marker.

\subsubsection{Hybrid virtualization}
virtio?



\begin{table}[htb]
\begin{center}
	\caption{Comparison of virtualization types}
	\label{tab:virtualization-types}
	\begin{tabular}{|l|}
	\hline
	\Th{Type} \\
	\hline
	Paravirtualization \\
	\hline
	Full virtualization \\
	\hline
	Hardware assisted virtualization \\
	\hline
	Hybrid virtualization \\
	\hline
	\end{tabular}
\end{center}
\end{table}

